<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Family Taboo Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
    }

    .container {
      margin-top: 10px;
      width: 95%;
      max-width: 520px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .top-bar h1 {
      font-size: 20px;
      margin: 0;
    }

    .home-btn {
      padding: 6px 10px;
      border-radius: 16px;
      border: 1px solid #007aff;
      background: white;
      color: #007aff;
      font-size: 12px;
    }

    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.12);
      padding: 16px 18px;
      min-height: 200px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .name {
      text-align: center;
      font-weight: 700;
      font-size: 26px;
      margin-bottom: 12px;
    }

    .taboos {
      list-style: none;
      padding: 0;
      margin: 0 0 10px;
      font-size: 18px;
    }

    .taboos li {
      margin: 4px 0;
    }

    .note {
      text-align: center;
      font-size: 14px;
      color: #555;
      margin-top: 4px;
    }

    .small {
      text-align: center;
      margin-top: 6px;
      font-size: 12px;
      color: #777;
    }

    .footer {
      margin-top: 16px;
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .footer button {
      padding: 10px 20px;
      border-radius: 22px;
      border: none;
      background: #ff2d55;
      color: #fff;
      font-size: 16px;
    }

    .timer {
      margin-top: 10px;
      text-align: center;
      font-size: 18px;
      font-weight: 600;
    }

    .timer span {
      padding: 4px 10px;
      border-radius: 16px;
      background: #fff3cd;
      border: 1px solid #ffeeba;
      display: inline-block;
      min-width: 80px;
    }

    .timer span.red {
      background: #f8d7da;
      border-color: #f5c6cb;
      color: #c82333;
    }

    .timer-buttons {
      margin-top: 8px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .timer-buttons button {
      padding: 6px 12px;
      border-radius: 16px;
      border: none;
      background: #007aff;
      color: #fff;
      font-size: 13px;
    }

    .screen {
      margin-top: 8px;
    }

    .hidden {
      display: none;
    }

    .section-box {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.12);
      padding: 16px 18px;
      margin-bottom: 12px;
    }

    .section-box h2 {
      font-size: 18px;
      margin-top: 0;
    }

    .options-list {
      list-style: none;
      padding: 0;
      margin: 0;
      font-size: 14px;
    }

    .options-list li {
      margin: 4px 0;
    }

    .btn-primary {
      padding: 10px 18px;
      border-radius: 20px;
      border: none;
      background: #007aff;
      color: #fff;
      font-size: 15px;
    }

    .btn-secondary {
      padding: 8px 14px;
      border-radius: 18px;
      border: 1px solid #007aff;
      background: white;
      color: #007aff;
      font-size: 14px;
    }

    .game-summary {
      text-align: center;
      font-size: 13px;
      margin-bottom: 10px;
      color: #555;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="top-bar">
      <h1>Family Taboo Game</h1>
      <button id="home-btn" class="home-btn">Home</button>
    </div>

    <!-- HOME SCREEN -->
    <div id="home-screen" class="screen">
      <div class="section-box">
        <h2>1. Choose categories</h2>
        <ul id="category-list" class="options-list">
          <!-- Populated dynamically from CATEGORIES -->
        </ul>
      </div>

      <div class="section-box">
        <h2>2. Timer settings</h2>
        <ul class="options-list">
          <li>
            <label>
              <input type="radio" name="timer-option" value="none" checked>
              No timer
            </label>
          </li>
          <li>
            <label>
              <input type="radio" name="timer-option" value="30">
              Timer: 30 seconds
            </label>
          </li>
          <li>
            <label>
              <input type="radio" name="timer-option" value="45">
              Timer: 45 seconds
            </label>
          </li>
          <li>
            <label>
              <input type="radio" name="timer-option" value="60">
              Timer: 60 seconds
            </label>
          </li>
        </ul>
      </div>

      <div style="text-align:center; margin-top: 10px;">
        <button id="home-continue" class="btn-primary">Continue</button>
      </div>
    </div>

    <!-- CONFIRM SCREEN -->
    <div id="confirm-screen" class="screen hidden">
      <div class="section-box">
        <h2>Confirm your game</h2>
        <p><strong>Categories:</strong> <span id="confirm-categories"></span></p>
        <p><strong>Timer:</strong> <span id="confirm-timer"></span></p>
      </div>

      <div style="text-align:center; margin-top: 10px;">
        <button id="confirm-back" class="btn-secondary">Back</button>
        <button id="confirm-start" class="btn-primary">Start Game</button>
      </div>
    </div>

    <!-- GAME SCREEN -->
    <div id="game-screen" class="screen hidden">
      <div id="game-summary" class="game-summary"></div>

      <div class="card">
        <div>
          <div id="card-name" class="name">Loading…</div>
          <ul id="card-taboos" class="taboos"></ul>
          <div id="note" class="note"></div>
        </div>
        <div class="small" id="counter"></div>
      </div>

      <div id="timer-section" class="hidden">
        <div class="timer">
          <span id="timer-display">30 s</span>
        </div>
        <div class="timer-buttons">
          <button id="next-team-btn">Next Team's Turn</button>
        </div>
      </div>

      <div id="attempts-display" class="small" style="margin-top:8px;"></div>

      <div class="footer" id="nav-buttons">
        <button id="prev-btn">◀ Prev</button>
        <button id="next-btn">Next ▶</button>
      </div>
    </div>
  </div>

  <script>
    // ---------- RAW CARD DATA ----------

    const bollywoodCards = [
      { name: "Shah Rukh Khan", taboos: ["Bollywood","Romance","King Khan","DDLJ"] },
      { name: "Naseeruddin Shah", taboos: ["Parallel cinema","A Wednesday","Theatre","Masoom"] },
      { name: "Kamal Haasan", taboos: ["Tamil","Vishwaroopam","Actor-director","Nayakan"] },
      { name: "Raj Kapoor", taboos: ["Showman","Charlie Chaplin","Mera Naam Joker","RK Films"] },
      { name: "Govinda", taboos: ["Comedy","Dance","No. 1","David Dhawan"] },
      { name: "Neelam", taboos: ["Govinda","Ilzaam","80s","Actress"] },
      { name: "Kajol", taboos: ["SRK","DDLJ","K3G","Actress"] },
      { name: "Raveena Tandon", taboos: ["Tip Tip","Akshay Kumar","90s","Mohra"] },
      { name: "Anil Kapoor", taboos: ["Jhakaas","Slumdog","Mustache","Mr. India"] },
      { name: "Sanjeev Kumar", taboos: ["Thakur","Sholay","Versatile","9 roles"] },
      { name: "Dev Anand", taboos: ["Black coat","Guide","Evergreen","Navketan"] },
      { name: "Amitabh Bachchan", taboos: ["Angry Young Man","KBC","Sholay","Big B"] },
      { name: "Kareena Kapoor", taboos: ["Poo","Jab We Met","Saif","Kapoor family"] },
      { name: "Irrfan Khan", taboos: ["Lunchbox","Hollywood","Talvar","Natural acting"] },
      { name: "Akshay Kumar", taboos: ["Khiladi","Stunts","Comedy","Canada"] },
      { name: "Rajesh Khanna", taboos: ["First Superstar","Anand","Aradhana","Kaka"] },
      { name: "Aamir Khan", taboos: ["Perfectionist","Lagaan","3 Idiots","Dangal"] },
      { name: "Salman Khan", taboos: ["Bhai","Dabangg","Being Human","Eid"] },
      { name: "Sridevi", taboos: ["Chandni","Hawa Hawai","English Vinglish","Superstar"] },
      { name: "Madhuri Dixit", taboos: ["Dhak Dhak","Dance","HAHK","Smile"] },
      { name: "Tabu", taboos: ["Andhadhun","Haider","Talented","Serious roles"] },
      { name: "Alia Bhatt", taboos: ["SOTY","Ranbir","Raazi","Young star"] },
      { name: "Deepika Padukone", taboos: ["Padmavat","Ranveer","OSO","Tall"] },
      { name: "Madhubala", taboos: ["Mughal-e-Azam","Beauty","Anarkali","Classic"] },
      { name: "Hema Malini", taboos: ["Dream Girl","Basanti","Dharmendra","Actress"] },
      { name: "Shabana Azmi", taboos: ["Art cinema","Fire","Parallel","Activist"] },
      { name: "Smita Patil", taboos: ["Arth","Parallel cinema","Prakash Jha","Intense roles"] },
      { name: "Meena Kumari", taboos: ["Tragedy Queen","Pakeezah","Ghazals","Melodrama"] },
      { name: "Waheeda Rehman", taboos: ["Guide","Guru Dutt","Classical","Actress"] },
      { name: "Rekha", taboos: ["Umrao Jaan","Evergreen","Glamour","Amitabh"] },
      { name: "Sharmila Tagore", taboos: ["Kashmir Ki Kali","Tiger Pataudi","Bengali","Graceful"] },
      { name: "Rani Mukerji", taboos: ["Black","Kajol cousin","Husky voice","90s"] },
      { name: "Anupam Kher", taboos: ["Saaransh","Kher family","Actor","NSD"] },
      { name: "Juhi Chawla", taboos: ["QSQT","Miss India","Comedy","Aamir"] },
      { name: "Jaya Bachchan", taboos: ["Guddi","Amitabh","Politician","Mother roles"] },
      { name: "Priyanka Chopra", taboos: ["Miss World","Quantico","Nick Jonas","Global star"] },
      { name: "Aishwarya Rai", taboos: ["Miss World","Blue eyes","Devdas","Beauty"] },
      { name: "Vidya Balan", taboos: ["Kahaani","Dirty Picture","Strong roles","National Award"] },
      { name: "Kangana Ranaut", taboos: ["Queen","Controversy","National Award","Opinions"] },
      { name: "Divya Bharti", taboos: ["Deewana","90s","Tragic","Rising star"] },
      { name: "Meenakshi Seshadri", taboos: ["Damini","Dance","Hero","80s"] },
      { name: "Manoj Bajpayee", taboos: ["Wasseypur","Family Man","Method","Satya"] },
      { name: "Amrish Puri", taboos: ["Mogambo","Villain","Mr. India","Voice"] },
      { name: "Nana Patekar", taboos: ["Krantiveer","Welcome","Intense","Dialogue"] },
      { name: "Kader Khan", taboos: ["Writer","Comedy","Govinda","Dialogues"] },
      { name: "Paresh Rawal", taboos: ["Hera Pheri","Baburao","Comedy","Akshay"] },
      { name: "Om Puri", taboos: ["Serious","Ardh Satya","Hollywood","Parallel"] },
      { name: "Dharmendra", taboos: ["He-Man","Sholay","Hema","Action"] },
      { name: "Boman Irani", taboos: ["3 Idiots","Virus","Comedy-drama","Character"] },
      { name: "Ashok Kumar", taboos: ["Dada Muni","Classics","Dynasty","40s"] },
      { name: "Hrithik Roshan", taboos: ["Greek God","Krrish","Dance","2000"] },
      { name: "Jackie Shroff", taboos: ["Bhidu","Hero","Tiger Shroff","80s"] },
      { name: "Manoj Kumar", taboos: ["Bharat","Patriotic","Kranti","Director"] },
      { name: "Shatrughan Sinha", taboos: ["Khamosh","Dialogue","Politician","70s"] },
      { name: "Vinod Khanna", taboos: ["AAA","Handsome","Osho","Action"] },
      { name: "Amol Palekar", taboos: ["Middle class","Golmaal","Simple","70s"] },
      { name: "Sunny Deol", taboos: ["Dhai Kilo","Gadar","Action","Dialogues"] },
      { name: "Raj Kumar", taboos: ["Jaani","Dialogue","Pakeezah","Voice"] },
      { name: "Sanjay Dutt", taboos: ["Munna Bhai","Khalnayak","Drugs","Sanju"] },
      { name: "Ranbir Kapoor", taboos: ["Rockstar","Alia","Kapoor family","Barfi"] }
    ];

    const mythologyCards = [
      { name: "Rama", taboos: ["Ayodhya","Maryada Purushottam","Sita","Bow"] },
      { name: "Ravana", taboos: ["Lanka","Ten heads","Shiva devotee","Brahmastra"] },
      { name: "Sita", taboos: ["Abduction","Mithila","Agni Pariksha","Rama"] },
      { name: "Lakshman", taboos: ["Exile","Lakshman Rekha","Bow","Rama"] },
      { name: "Bharat", taboos: ["Paduka","Nandigram","Ayodhya","Younger brother"] },
      { name: "Shatrughana", taboos: ["Twins","Kaikeyi","Younger","Brothers"] },
      { name: "Kaushalya", taboos: ["Mother","Ayodhya","Queen","Rama"] },
      { name: "Hanuman", taboos: ["Monkey","Sanjeevani","Strength","Devotion"] },
      { name: "Sugreeva", taboos: ["Monkey king","Bali","Kishkindha","Alliance"] },
      { name: "Meghnaad", taboos: ["Indrajit","Invisible","Serpents","Warrior"] },
      { name: "Yudhishthira", taboos: ["Eldest","Dharma","Dice game","Rajasuya"] },
      { name: "Bheem", taboos: ["Strength","Mace","Pandava","Rakshasa"] },
      { name: "Arjun", taboos: ["Archer","Gandiva","Krishna","Kurukshetra"] },
      { name: "Nakul", taboos: ["Handsome","Twins","Pandava","Sword"] },
      { name: "Sahadev", taboos: ["Astrology","Twins","Pandava","Wisdom"] },
      { name: "Duryodhana", taboos: ["Kaurava","Jealousy","Mace","Hastinapur"] },
      { name: "Dushasana", taboos: ["Draupadi","Disrobing","Cruel","Kaurava"] },
      { name: "Bheeshma Pitamah", taboos: ["Vow","Ganga","Bed of arrows","Kuru"] },
      { name: "Dhritarashtra", taboos: ["Blind king","Kauravas","Gandhari","Throne"] },
      { name: "Draupadi", taboos: ["Five husbands","Fire-born","Disrobing","Kurukshetra"] },
      { name: "Krishna", taboos: ["Flute","Avatar","Mathura","Arjun"] },
      { name: "Kansa", taboos: ["Mathura","Evil king","Krishna","Devaki"] },
      { name: "Parashuraam", taboos: ["Axe","Brahmin warrior","Avatar","Kshatriya"] },
      { name: "Shikhandi", taboos: ["Amba","Gender","Bhishma","Rebirth"] },
      { name: "Kunti", taboos: ["Pandavas","Surya","Karna","Mother"] },
      { name: "Shiva", taboos: ["Trishul","Kailash","Tandav","Mahadev"] },
      { name: "Brahma", taboos: ["Creator","Four heads","Saraswati","Vedas"] },
      { name: "Narad Muni", taboos: ["Veena","Messenger","Troublemaker","Sage"] },
      { name: "Parvati", taboos: ["Shiva","Shakti","Himalaya","Goddess"] },
      { name: "Durga Mata", taboos: ["Lion","Mahishasura","Nine forms","Weapons"] },
      { name: "Lakshmi Ji", taboos: ["Wealth","Vishnu","Lotus","Diwali"] },
      { name: "Ganesh Ji", taboos: ["Elephant head","Modak","Remover","Shiva/Parvati"] },
      { name: "Vishnu Ji", taboos: ["Preserver","Avatars","Sheshnag","Vaikuntha"] },
      { name: "Valmiki", taboos: ["Ramayana","Poet","Sage","Sanskrit"] },
      { name: "Ved Vyas", taboos: ["Mahabharata","Vedas","Sage","Krishna Dvaipayana"] },
      { name: "Saraswati Ji", taboos: ["Veena","Knowledge","White lotus","Vedas"] },
      { name: "Indra Dev", taboos: ["Thunderbolt","Heaven","Rain","Airavat"] },
      { name: "Agni Dev", taboos: ["Fire","Sacrifice","Flames","Rituals"] },
      { name: "Surya Dev", taboos: ["Sun","Seven horses","Light","Chariot"] },
      { name: "Varun Dev", taboos: ["Water","Oceans","Rain","Deity"] },
      { name: "Yama", taboos: ["Death","Justice","Afterlife","Dharma"] },
      { name: "Kaali Mata", taboos: ["Fierce","Dark form","Demons","Tongue"] },
      { name: "Kartikeya", taboos: ["Spear","Peacock","War god","Brother"] },
      { name: "Vaayu Dev", taboos: ["Wind","Air","Hanuman","Breath"] },
      { name: "Prahlaad", taboos: ["Bhakti","Hiranyakashipu","Narasimha","Devotee"] },
      { name: "Kama Dev", taboos: ["Love","Flower arrows","Rati","Desire"] },
      { name: "Shakuntala", taboos: ["Dushyant","Ring","Kalidasa","Forest"] },
      { name: "Vishwamitra", taboos: ["Sage","Menaka","Gayatri","Rivalry"] },
      { name: "Dronacharya", taboos: ["Teacher","Archery","Pandavas","Kauravas"] },
      { name: "Karna", taboos: ["Kavach","Surya","Friendship","Suta"] }
    ];

    const nineCards = [
      { name: "Cat", taboos: ["Kitten","Meow","Whiskers","Pet"] },
      { name: "Dog", taboos: ["Puppy","Bark","Tail","Pet"] },
      { name: "School", taboos: ["Classroom","Teacher","Study","Students"] },
      { name: "Teacher", taboos: ["School","Class","Homework","Student"] },
      { name: "Friend", taboos: ["Best","Play","Buddy","Together"] },
      { name: "Pizza", taboos: ["Cheese","Slice","Toppings","Crust"] },
      { name: "Ice cream", taboos: ["Cold","Scoop","Cone","Dessert"] },
      { name: "Birthday", taboos: ["Cake","Party","Candles","Gifts"] },
      { name: "Cake", taboos: ["Frosting","Candles","Sweet","Birthday"] },
      { name: "Rainbow", taboos: ["Colors","Sky","Rain","Arc"] },

      { name: "Sun", taboos: ["Hot","Day","Bright","Sky"] },
      { name: "Moon", taboos: ["Night","Sky","Round","Light"] },
      { name: "Stars", taboos: ["Night","Twinkle","Sky","Shine"] },
      { name: "Cloud", taboos: ["White","Sky","Rain","Fluffy"] },
      { name: "Rain", taboos: ["Wet","Umbrella","Drops","Cloudy"] },
      { name: "Snow", taboos: ["White","Cold","Winter","Flakes"] },
      { name: "River", taboos: ["Water","Flow","Stream","Bank"] },
      { name: "Mountain", taboos: ["Tall","Climb","Rock","Peak"] },
      { name: "Tree", taboos: ["Leaves","Trunk","Branch","Forest"] },
      { name: "Flower", taboos: ["Petals","Garden","Smell","Plant"] },

      { name: "Book", taboos: ["Pages","Read","Story","Library"] },
      { name: "Pencil", taboos: ["Write","Sharp","Eraser","Lead"] },
      { name: "Eraser", taboos: ["Rub","Remove","Pencil","Mistake"] },
      { name: "Backpack", taboos: ["Bag","School","Books","Carry"] },
      { name: "Desk", taboos: ["Table","Chair","School","Work"] },
      { name: "Homework", taboos: ["School","Teacher","Worksheet","After"] },
      { name: "Test", taboos: ["Exam","Study","Marks","Questions"] },
      { name: "Recess", taboos: ["Break","Play","Outside","School"] },
      { name: "Playground", taboos: ["Slide","Swing","Park","Play"] },
      { name: "Swing", taboos: ["Push","Back","Forth","Seat"] },

      { name: "Football", taboos: ["Ball","Goal","Kick","Team"] },
      { name: "Basketball", taboos: ["Hoop","Bounce","Dribble","Court"] },
      { name: "Swimming", taboos: ["Pool","Water","Strokes","Goggles"] },
      { name: "Bicycle", taboos: ["Bike","Pedal","Wheels","Ride"] },
      { name: "Skipping rope", taboos: ["Jump","Rope","Feet","Game"] },
      { name: "Dance", taboos: ["Music","Move","Steps","Rhythm"] },
      { name: "Music", taboos: ["Song","Notes","Sound","Listen"] },
      { name: "Piano", taboos: ["Keys","Instrument","Music","Play"] },
      { name: "Guitar", taboos: ["Strings","Instrument","Music","Play"] },
      { name: "Song", taboos: ["Sing","Music","Lyrics","Tune"] },

      { name: "Sister", taboos: ["Girl","Sibling","Brother","Family"] },
      { name: "Brother", taboos: ["Boy","Sibling","Sister","Family"] },
      { name: "Mother", taboos: ["Mom","Parent","Lady","Family"] },
      { name: "Father", taboos: ["Dad","Parent","Man","Family"] },
      { name: "Grandma", taboos: ["Old","Mother","Grandpa","Family"] },
      { name: "Grandpa", taboos: ["Old","Father","Grandma","Family"] },
      { name: "Baby", taboos: ["Small","Cry","Diaper","Cute"] },
      { name: "Family", taboos: ["Home","Parents","Children","Together"] },
      { name: "House", taboos: ["Home","Rooms","Live","Door"] },
      { name: "Bedroom", taboos: ["Sleep","Bed","Pillow","Night"] },

      { name: "Chocolate", taboos: ["Sweet","Candy","Bar","Brown"] },
      { name: "Candy", taboos: ["Sweet","Sugar","Treat","Wrapper"] },
      { name: "Potato chips", taboos: ["Snack","Salty","Packet","Crunchy"] },
      { name: "Sandwich", taboos: ["Bread","Cheese","Lunch","Slice"] },
      { name: "Milk", taboos: ["White","Drink","Glass","Cow"] },
      { name: "Water bottle", taboos: ["Drink","Refill","Plastic","Thirsty"] },
      { name: "Juice", taboos: ["Fruit","Drink","Glass","Orange"] },
      { name: "Apple", taboos: ["Red","Fruit","Tree","Crunchy"] },
      { name: "Banana", taboos: ["Yellow","Fruit","Peel","Monkey"] },
      { name: "Mango", taboos: ["Orange","Fruit","Summer","Sweet"] },

      { name: "Train", taboos: ["Tracks","Station","Engine","Travel"] },
      { name: "Airplane", taboos: ["Wings","Fly","Airport","Pilot"] },
      { name: "Car", taboos: ["Drive","Road","Wheels","Engine"] },
      { name: "Bus", taboos: ["Big","School","Seats","Driver"] },
      { name: "Scooter", taboos: ["Ride","Wheels","Push","Handle"] },
      { name: "Road", taboos: ["Cars","Street","Traffic","Drive"] },
      { name: "Traffic light", taboos: ["Red","Green","Signal","Stop"] },
      { name: "Bridge", taboos: ["River","Cross","Road","Over"] },
      { name: "Park", taboos: ["Grass","Trees","Bench","Play"] },
      { name: "Zoo", taboos: ["Animals","Cages","Visit","Keeper"] },

      { name: "Lion", taboos: ["King","Jungle","Mane","Roar"] },
      { name: "Elephant", taboos: ["Trunk","Big","Grey","Tusk"] },
      { name: "Monkey", taboos: ["Banana","Climb","Tail","Jungle"] },
      { name: "Giraffe", taboos: ["Tall","Neck","Spots","Zoo"] },
      { name: "Rabbit", taboos: ["Ears","Hop","Carrot","Furry"] },
      { name: "Fish", taboos: ["Water","Swim","Fins","Tank"] },
      { name: "Butterfly", taboos: ["Wings","Colors","Fly","Garden"] },
      { name: "Bird", taboos: ["Wings","Fly","Nest","Feathers"] },
      { name: "Dolphin", taboos: ["Ocean","Swim","Jump","Smart"] },
      { name: "Whale", taboos: ["Big","Ocean","Water","Blow"] },

      { name: "Doctor", taboos: ["Hospital","Medicine","Sick","Nurse"] },
      { name: "Nurse", taboos: ["Doctor","Hospital","Care","Medicine"] },
      { name: "Police officer", taboos: ["Uniform","Law","Arrest","Station"] },
      { name: "Firefighter", taboos: ["Fire","Truck","Hose","Rescue"] },
      { name: "Chef", taboos: ["Cook","Kitchen","Food","Restaurant"] },
      { name: "Artist", taboos: ["Paint","Draw","Colors","Picture"] },
      { name: "Scientist", taboos: ["Lab","Experiment","Test","Study"] },
      { name: "Astronaut", taboos: ["Space","Rocket","Moon","Suit"] },
      { name: "Singer", taboos: ["Voice","Song","Music","Microphone"] },
      { name: "Dancer", taboos: ["Dance","Stage","Music","Moves"] },

      { name: "Movie", taboos: ["Film","Watch","Theatre","Actors"] },
      { name: "Cartoon", taboos: ["TV","Funny","Characters","Draw"] },
      { name: "Robot", taboos: ["Metal","Machine","Program","Automatic"] },
      { name: "Dinosaur", taboos: ["Extinct","Big","Fossils","Jurassic"] },
      { name: "Fairy", taboos: ["Wings","Magic","Dust","Tiny"] },
      { name: "Princess", taboos: ["Castle","Crown","Royal","Dress"] },
      { name: "Castle", taboos: ["King","Queen","Walls","Towers"] },
      { name: "Magic", taboos: ["Tricks","Wand","Spells","Wizard"] },
      { name: "Superhero", taboos: ["Powers","Cape","Save","Comic"] },
      { name: "Treasure", taboos: ["Chest","Gold","Pirate","Map"] }
    ];

    const sixWords = [
      "cat","dog","sun","moon","star","bed","bus","car","ball","doll",
      "toy","book","pen","bag","hat","cap","cup","milk","cake","jam",
      "egg","fish","bird","tree","leaf","rain","snow","park","swing","slide",
      "top","red","blue","big","small","happy","sad","run","jump","walk",
      "sit","stand","hand","foot","eye","nose","mouth","hair","face","home",
      "school","class","desk","chair","friend","baby","sister","brother","grandma","grandpa"
    ];

    // ---------- CATEGORY REGISTRY ----------
    // To add a new category (e.g. "cityNames"), just add another entry here.
    // The UI and game logic will pick it up automatically.

    const CATEGORIES = {
      bollywood: {
        label: "Bollywood",
        defaultChecked: true,
        cards: bollywoodCards
      },
      mythology: {
        label: "Mythology",
        defaultChecked: true,
        cards: mythologyCards
      },
      kids9: {
        label: "Kids 9+ Taboo",
        defaultChecked: false,
        cards: nineCards
      },
      kids6: {
        label: "Kids 6+ Simple",
        defaultChecked: false,
        cards: sixWords.map(w => ({ name: w, simple: true }))
      }

      // Example of adding a new category later:
      // cityNames: {
      //   label: "City Names",
      //   defaultChecked: false,
      //   cards: [
      //     { name: "Houston", simple: true },
      //     { name: "Mumbai", simple: true },
      //     { name: "Tokyo", simple: true }
      //   ]
      // }
    };

    // ---------- STATE ----------

    let selectedCategories = [];
    let timerEnabled = false;
    let timerDuration = 0;
    let timerSeconds = 0;
    let timerId = null;

    let deck = [];
    let shuffled = [];
    let index = 0;
    let roundAttempts = 0;

    // ---------- HELPERS ----------

    function shuffle(array) {
      const a = array.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function showScreen(name) {
      document.getElementById("home-screen").classList.add("hidden");
      document.getElementById("confirm-screen").classList.add("hidden");
      document.getElementById("game-screen").classList.add("hidden");
      document.getElementById(name + "-screen").classList.remove("hidden");
    }

    function buildDeckFromSelections() {
      let d = [];
      for (const key of selectedCategories) {
        const cat = CATEGORIES[key];
        if (cat && Array.isArray(cat.cards)) {
          d = d.concat(cat.cards);
        }
      }
      return d;
    }

    function updateCard() {
      const nameEl = document.getElementById("card-name");
      const ul = document.getElementById("card-taboos");
      const counterEl = document.getElementById("counter");
      const noteEl = document.getElementById("note");

      if (!shuffled || shuffled.length === 0) {
        nameEl.textContent = "No cards.";
        ul.innerHTML = "";
        counterEl.textContent = "";
        noteEl.textContent = "";
        return;
      }

      const item = shuffled[index];

      if (item.simple) {
        const word = item.name;
        nameEl.textContent = String(word).toUpperCase();
        ul.innerHTML = "";
        noteEl.textContent = "Read this word aloud!";
        counterEl.textContent = `Word ${index + 1} of ${shuffled.length}`;
      } else {
        const card = item;
        nameEl.textContent = card.name;
        ul.innerHTML = "";
        card.taboos.forEach(t => {
          const li = document.createElement("li");
          li.textContent = t;
          ul.appendChild(li);
        });
        noteEl.textContent = "Describe this word without saying any of the taboo words!";
        counterEl.textContent = `Card ${index + 1} of ${shuffled.length}`;
      }
    }

    function updateAttemptsDisplay() {
      const el = document.getElementById("attempts-display");
      el.textContent = "Words attempted this round: " + roundAttempts;
    }

    function updateTimerDisplay() {
      if (!timerEnabled) return;
      const el = document.getElementById("timer-display");
      if (timerSeconds <= 0) {
        el.textContent = "TIME UP!";
        el.classList.add("red");
      } else {
        el.textContent = timerSeconds + " s";
        if (timerSeconds <= 5) el.classList.add("red");
        else el.classList.remove("red");
      }
    }

    function stopTimer() {
      if (timerId) {
        clearInterval(timerId);
        timerId = null;
      }
    }

    function onTimeUp() {
      stopTimer();
      timerSeconds = 0;
      updateTimerDisplay();

      const nextBtn = document.getElementById("next-btn");
      const prevBtn = document.getElementById("prev-btn");
      const navButtons = document.getElementById("nav-buttons");
      const nextTeamBtn = document.getElementById("next-team-btn");

      nextBtn.disabled = true;
      prevBtn.disabled = true;
      navButtons.style.display = "none";  // hide Prev/Next
      nextTeamBtn.style.display = "inline-block"; // show next team button

      const noteEl = document.getElementById("note");
      noteEl.textContent = "Time is up! Words attempted this round: " + roundAttempts;
    }

    function startTimer() {
      if (!timerEnabled) return;
      if (timerId || timerSeconds <= 0) return;
      timerId = setInterval(() => {
        timerSeconds--;
        if (timerSeconds <= 0) {
          onTimeUp();
        } else {
          updateTimerDisplay();
        }
      }, 1000);
    }

    function startNewRound(reshuffle) {
      const nextBtn = document.getElementById("next-btn");
      const prevBtn = document.getElementById("prev-btn");
      const navButtons = document.getElementById("nav-buttons");
      const nextTeamBtn = document.getElementById("next-team-btn");

      if (reshuffle) {
        shuffled = shuffle(deck);
        index = 0;
      }

      roundAttempts = deck.length > 0 ? 1 : 0;
      updateCard();
      updateAttemptsDisplay();

      if (timerEnabled) {
        stopTimer();
        timerSeconds = timerDuration;
        document.getElementById("timer-display").classList.remove("red");
        updateTimerDisplay();
        startTimer(); // auto-start for each team
      }

      nextBtn.disabled = false;
      prevBtn.disabled = false;
      navButtons.style.display = "flex";
      nextTeamBtn.style.display = "none";
    }

    // ---------- ACTIONS ----------

    function goHome() {
      stopTimer();
      showScreen("home");
    }

    function fromHomeToConfirm() {
      selectedCategories = [];
      const checkboxes = document.querySelectorAll('#category-list input[type="checkbox"]');
      checkboxes.forEach(cb => {
        if (cb.checked && cb.dataset.categoryKey) {
          selectedCategories.push(cb.dataset.categoryKey);
        }
      });

      if (selectedCategories.length === 0) {
        alert("Please select at least one category.");
        return;
      }

      const timerRadio = document.querySelector('input[name="timer-option"]:checked');
      const val = timerRadio ? timerRadio.value : "none";
      if (val === "none") {
        timerEnabled = false;
        timerDuration = 0;
      } else {
        timerEnabled = true;
        timerDuration = parseInt(val, 10);
      }

      const catNames = selectedCategories.map(c => CATEGORIES[c].label);
      document.getElementById("confirm-categories").textContent = catNames.join(", ");

      const timerText = timerEnabled ? (timerDuration + " seconds") : "No timer";
      document.getElementById("confirm-timer").textContent = timerText;

      showScreen("confirm");
    }

    function startGameFromConfirm() {
      deck = buildDeckFromSelections();
      if (deck.length === 0) {
        alert("No cards found for selected categories.");
        goHome();
        return;
      }

      shuffled = shuffle(deck);
      index = 0;
      roundAttempts = deck.length > 0 ? 1 : 0;

      const catNames = selectedCategories.map(c => CATEGORIES[c].label).join(", ");
      const timerText = timerEnabled ? (timerDuration + " seconds") : "No timer";
      document.getElementById("game-summary").textContent =
        "Categories: " + catNames + " | Timer: " + timerText;

      const timerSection = document.getElementById("timer-section");
      const nextTeamBtn = document.getElementById("next-team-btn");
      const navButtons = document.getElementById("nav-buttons");
      const nextBtn = document.getElementById("next-btn");
      const prevBtn = document.getElementById("prev-btn");

      if (timerEnabled) {
        timerSection.classList.remove("hidden");
        nextTeamBtn.style.display = "none"; // hidden until time up
        timerSeconds = timerDuration;
        document.getElementById("timer-display").classList.remove("red");
        updateTimerDisplay();
        startTimer(); // auto-start on game start
      } else {
        timerSection.classList.add("hidden");
        stopTimer();
      }

      updateCard();
      updateAttemptsDisplay();
      nextBtn.disabled = false;
      prevBtn.disabled = false;
      navButtons.style.display = "flex";

      showScreen("game");
    }

    function nextCard() {
      if (!shuffled || shuffled.length === 0) return;
      const nextBtn = document.getElementById("next-btn");
      if (nextBtn.disabled) return;

      index++;
      if (index >= shuffled.length) {
        shuffled = shuffle(deck);
        index = 0;
      }
      updateCard();
      if (deck.length > 0) {
        roundAttempts++;
        updateAttemptsDisplay();
      }
    }

    function prevCard() {
      if (!shuffled || shuffled.length === 0) return;
      const prevBtn = document.getElementById("prev-btn");
      if (prevBtn.disabled) return;

      index--;
      if (index < 0) index = shuffled.length - 1;
      updateCard();
      // attempts not changed on prev
    }

    function nextTeamTurn() {
      if (!timerEnabled) return;
      startNewRound(true);
    }

    // ---------- INIT UI FROM CATEGORY REGISTRY ----------

    function buildCategoryCheckboxes() {
      const list = document.getElementById("category-list");
      list.innerHTML = "";
      for (const [key, cat] of Object.entries(CATEGORIES)) {
        const li = document.createElement("li");
        const label = document.createElement("label");
        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.id = "cat-" + key;
        cb.dataset.categoryKey = key;
        cb.checked = !!cat.defaultChecked;
        label.appendChild(cb);
        label.appendChild(document.createTextNode(" " + cat.label));
        li.appendChild(label);
        list.appendChild(li);
      }
    }

    // ---------- INIT ----------

    window.addEventListener("load", () => {
      buildCategoryCheckboxes();

      document.getElementById("home-btn").addEventListener("click", goHome);

      document.getElementById("home-continue").addEventListener("click", fromHomeToConfirm);
      document.getElementById("confirm-back").addEventListener("click", () => showScreen("home"));
      document.getElementById("confirm-start").addEventListener("click", startGameFromConfirm);

      document.getElementById("next-btn").addEventListener("click", nextCard);
      document.getElementById("prev-btn").addEventListener("click", prevCard);

      document.getElementById("next-team-btn").addEventListener("click", nextTeamTurn);

      goHome();
    });
  </script>
</body>
</html>

